<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Graphics</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="../dist/Charts.css" />
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="../dist/Charts.js"></script>

  <script type="text/javascript">
  $(document).ready(function() {

    var socket = new WebSocket("wss://188.42.240.122:8443");
    var timer = new Date().getTime();

    var time, value;
    var data = {'EUR': []};

    for (i = 1800; i>0; i--) {
      time = new Date().getTime() - 30*1000 - 400*i;
      value = (0.5 - Math.random())/1000 + 1.11145;
      data['EUR'].push({ "rate": "" + value, "created_at": "" + time/1000 });
    }

    window.chart = new Charts({el: $('#container')[0], name: 'EUR'});

    chart.onReady(function() {
      chart
        .setCollection(data['EUR'])
        .startListenSocket(socket)
        .setTimer(data['EUR'][data['EUR'].length-1].created_at*1000 + (2 * 60 * 1000));
    });
  });
  </script>
</head>
<body>
  <div class="l-page">
    <div id="container" style="height: 400px; min-width: 310px"></div>
  </div>
</body>
</html>
